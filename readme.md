**基于langgraph实现智能体的简单教程**

# langgraph简单介绍

**核心概念：**

LangGraph 是一种构建由多个智能体（Agents）组成的复杂应用，特别是多智能体协作应用的新兴编程框架。 它的核心思想是将整个应用的执行流程建模成一个 **图（Graph）**。 图中的节点代表 **状态（State）** 或 **步骤（Step）**， 边则代表 **智能体之间的转换或状态转移**。

可以将其想象成一个由不同的“AI 工作站”连接起来的流水线，每个工作站对应一个智能体，负责特定的任务，通过精心设计的流程，最终完成一个复杂的目标。

**LangGraph的优势**

*   **多智能体协作的强大支持：** LangGraph 专门为构建多智能体系统而设计，简化了智能体之间的通信、决策和任务分配。它提供了一套清晰的框架来管理智能体之间的复杂交互，降低了开发难度。
*   **流程控制与可控性：** 使用图结构可以将复杂的应用流程分解为多个步骤。这使得开发者可以对整个流程进行细粒度控制，更容易追踪、调试和优化智能体的行为，实现更高的可靠性和可预测性。
*   **灵活的状态管理：** LangGraph 提供强大的状态管理机制，允许你在节点之间传递信息。这使得智能体能够访问和更新共享状态，从而更好地进行协作和决策。
*   **易于扩展与模块化：** 将应用构建成图结构，天然具有模块化的特性。你可以轻松地添加、删除或修改节点和边，从而快速调整应用的结构和功能。
*   **与 LangChain 的无缝集成：** LangGraph 是 LangChain 生态系统的一部分，可以与 LangChain 的其他模块（如模型、向量存储等）无缝集成，充分利用 LangChain 强大的功能。

**核心组件：**

*   **状态（State）：** 应用的当前状态，可以包含任何类型的数据，例如智能体之间的消息、任务列表、知识库等。你可以定义一个类来表示 State，并使用 Pydantic 进行数据验证。
*   **节点（Node）：** 图中的一个步骤，通常代表一个智能体的行为或一个特定的任务。 节点可以是一个 LangChain Chain, Agent, Tool, Python 函数或者任何 callable 对象。
*   **图（Graph）：** 由节点和边组成的结构，定义了应用的执行流程。 你可以使用 `langgraph.Graph` 类来构建图。
*   **边（Edge）：** 连接图中节点的线，表示智能体之间的转换或状态转移。边可以是有条件的，这意味着它们只有在满足特定条件时才会被激活。
*   **条件边（Conditional Edges）：** 一种特殊的边，允许根据当前状态来决定下一步执行哪个节点。这使得智能体可以根据环境变化和任务需求动态调整行为。

**工作流程：**
1.  **定义状态（State）：** 创建一个类来表示应用的状态，定义状态中包含的数据字段。
2.  **创建节点（Node）：** 为每个智能体或任务创建一个节点。
3.  **定义边（Edge）：** 使用边来连接节点，定义智能体之间的转换和状态转移。
4.  **添加条件边（Conditional Edge，可选）：**  如果需要根据状态来动态调整流程，可以添加条件边。
5.  **构建图（Graph）：** 使用 `langgraph.Graph` 类来构建图，将节点和边添加到图中。
6.  **运行图（Run）：** 使用 `graph.compile()` 编译图，然后使用 `graph.invoke()` 或 `graph.stream()` 来运行图。

**适用场景:**

*   **多智能体协作：** 非常适合构建需要多个智能体协同工作的应用，例如客服机器人、自动化流程管理系统、研究助手等。
*   **复杂决策流程：** 可以用于模拟复杂的决策流程，例如金融交易、风险评估、医疗诊断等。
*   **需要可控性和可追溯性的应用：**  适用于需要对智能体的行为进行严格控制和追踪的场景。

# 示例代码
** demo1 ** 给出了实现与AI对话的简单Agent
** demo2 ** 在demo1的基础上实现了流式传输
** demo3 ** 实现了一个多智能体的demo

# 配置.env 安转requirement.txt中的环境即可运行

